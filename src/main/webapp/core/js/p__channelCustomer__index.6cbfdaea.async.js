(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["p__channelCustomer__index"],{lSSE:function(e,t,a){"use strict";var n=a("WoBQ"),l=a("IioX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("owAf");var r=n(a("45Yq"));a("TU+R");var d=n(a("T01o"));a("H5Xe");var u=n(a("ceHj"));a("UjCR");var i=n(a("25lY"));a("Uv/9");var c=n(a("k+1Q")),o=n(a("YG2P")),s=n(a("v9za")),f=n(a("HZd3")),m=n(a("XCq7")),h=n(a("2y15")),p=n(a("Bl3d")),g=n(a("2ya7"));a("Oimf");var E=n(a("u2qt"));a("urta");var v=n(a("Y+W5"));a("SI0Y");var C,y,S,I,b=n(a("5dLQ")),w=l(a("uqIC")),L=a("L5c0"),x=n(a("Zve3")),k=n(a("CkN6")),N=(a("wbdi"),n(a("jJIE"))),Y=a("t3Un"),D=n(a("a1/1")),T=n(a("RvHS")),R=a("Bl3j"),_=a("k9Yu"),F=b.default.RangePicker,V=v.default.Item,M=E.default.Option,U=(C=(0,L.connect)(function(e){return{channelCustomer:e.channelCustomer,loading:e.loading.models.channelCustomer,loadingList:e.loading.effects["channelCustomer/fetchList"]}}),y=v.default.create(),C(S=y((I=function(e){function t(){var e,a;(0,f.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,h.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(l))),a.state={formValues:{},userInfo:{showLendStatus:0},channelList:[]},a.initData=function(){Promise.all([(0,_.fetchInfo)(),(0,R.fetchChannelSelf)()]).then(function(e){var t=(0,s.default)(e,2),n=t[0],l=t[1];a.setState({userInfo:n,channelList:l}),l.length>0&&a.handleSearch()})},a.getList=function(e){var t=a.state.formValues,n=a.props.channelCustomer.pagination,l=n.current,r=n.pageSize;null===e&&(e=(0,o.default)({},t,{current:l,pageSize:r})),a.props.dispatch({type:"channelCustomer/fetchList",payload:e}),a.props.dispatch({type:"channelCustomer/fetchDataCount",payload:e})},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}}),a.handleSearch()},a.handleSearch=function(e){e&&e.preventDefault();var t=a.state.channelList,n=a.props.form;t.length<=0?c.default.error("\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u6dfb\u52a0\u6e20\u9053"):n.validateFields(function(e,t){if(!e){var n=t["range-picker"];n.length>0&&(t["startTime"]=n[0]&&n[0].format("YYYY-MM-DD")||"",t["endTime"]=n[1]&&n[1].format("YYYY-MM-DD")||"",delete t["range-picker"]),a.setState({formValues:t}),a.getList(t)}})},a.handleStandardTableChange=function(e){var t=e.current,n=e.pageSize,l=a.state.formValues;a.getList((0,o.default)({current:t,pageSize:n},l))},a.handleExportClick=function(){var e=a.state.formValues,t=N.default.get("channelUser")||"{}",n=JSON.parse(t),l=n.id,r=(0,Y.makeURLSearchParams)(e);D.default.download_file("/".concat(T.default.CHANNEL_CUSTOMER_EXPORT,"?id=").concat(l,"&").concat(r))},a.renderSearchForm=function(){var e=a.props.form.getFieldDecorator,t=a.state.channelList,n=t.length>0;return w.default.createElement(v.default,{onSubmit:a.handleSearch,layout:"inline"},w.default.createElement(d.default,{gutter:{md:8,lg:24,xl:48}},w.default.createElement(i.default,{md:8,sm:24},w.default.createElement(V,{label:"\u6e20\u9053"},n?e("channelId",{initialValue:t[0].channelId})(w.default.createElement(E.default,{style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6e20\u9053"},t.map(function(e){return w.default.createElement(M,{value:e.channelId,key:e.channelId},e.channelName)}))):w.default.createElement(E.default,{style:{width:"100%"},placeholder:"\u65e0\u53ef\u9009\u6e20\u9053",disabled:!0}))),w.default.createElement(i.default,{md:8,sm:24},w.default.createElement(V,{label:"\u6ce8\u518c\u65f6\u95f4"},e("range-picker",{initialValue:[]})(w.default.createElement(F,null)))),w.default.createElement(i.default,{md:4,sm:24,style:{textAlign:"right"}},w.default.createElement(V,null,w.default.createElement("span",{className:"submitButtons"},w.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.default.createElement(u.default,{style:{marginLeft:8},onClick:a.handleFormReset,disabled:!n},"\u91cd\u7f6e")))),w.default.createElement(i.default,{md:4,sm:24},w.default.createElement(u.default,{icon:"download",type:"primary",onClick:a.handleExportClick,disabled:!n},"\u5bfc\u51fa"))))},a.renderTableColumns=function(e){return[{title:"\u5e8f\u53f7",dataIndex:"sortNum",width:80,render:function(t){return(e.current-1)*e.pageSize+t}},{title:"\u59d3\u540d",dataIndex:"realname",width:80,render:function(e){return e||"--"}},{title:"\u624b\u673a\u53f7",dataIndex:"phone",width:110},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"createTime",width:180,align:"center"}]},a.renderDataColumns=function(){var e=a.state.userInfo.showLendStatus,t=void 0===e?0:e,n=[{title:"\u7d2f\u8ba1\u6ce8\u518c\u4eba\u6570",dataIndex:"registerNum",align:"center"},{title:"\u7d2f\u8ba1\u7533\u8bf7\u4eba\u6570",dataIndex:"applyNum",align:"center"},{title:w.default.createElement("span",null,"\u7533\u8bf7\u8f6c\u5316\u7387",w.default.createElement("br",null),"(\u7533\u8bf7\u4eba\u6570/\u6ce8\u518c\u4eba\u6570)"),dataIndex:"applyConversion",align:"center",render:function(e){return e+"%"||!1}}],l=[{title:"\u7d2f\u8ba1\u6ce8\u518c\u4eba\u6570",dataIndex:"registerNum",align:"center"},{title:"\u7d2f\u8ba1\u7533\u8bf7\u4eba\u6570",dataIndex:"applyNum",align:"center"},{title:"\u7d2f\u8ba1\u653e\u6b3e\u4eba\u6570",dataIndex:"lendNum",align:"center"},{title:w.default.createElement("span",null,"\u7533\u8bf7\u8f6c\u5316\u7387",w.default.createElement("br",null),"(\u7533\u8bf7\u4eba\u6570/\u6ce8\u518c\u4eba\u6570)"),dataIndex:"applyConversion",align:"center",render:function(e){return e+"%"||!1}},{title:w.default.createElement("span",null,"\u653e\u6b3e\u8f6c\u5316\u7387",w.default.createElement("br",null),"(\u653e\u6b3e\u4eba\u6570/\u6ce8\u518c\u4eba\u6570)"),dataIndex:"lendConversion",align:"center",render:function(e){return e+"%"||!1}}];return 1===t?l:n},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this.props,t=e.channelCustomer,a=t.list,n=t.pagination,l=e.loadingList,d={list:a,pagination:n};return w.default.createElement(x.default,{title:"\u6e20\u9053\u5ba2\u6237\u7ba1\u7406"},w.default.createElement(r.default,{bordered:!1},w.default.createElement("div",{className:"tableList"},w.default.createElement("div",{className:"tableListForm"},this.renderSearchForm()),w.default.createElement("div",{style:{marginBottom:"25px"}},w.default.createElement("h4",null,"\u6570\u636e\u7edf\u8ba1"),w.default.createElement("p",null,"\u5907\u6ce8\uff1a\u7533\u8bf7\u6307\u5b8c\u6210\u8ba4\u8bc1\u3002"),w.default.createElement(k.default,{rowKey:"registerNum",data:{list:this.props.channelCustomer.dataCount},columns:this.renderDataColumns(),pagination:!1})),w.default.createElement("h4",null,"\u6ce8\u518c\u8be6\u60c5"),w.default.createElement(k.default,{rowKey:"phone",loading:l,data:d,columns:this.renderTableColumns(n),onChange:this.handleStandardTableChange}))))}}]),t}(w.Component),S=I))||S)||S);t.default=U}}]);